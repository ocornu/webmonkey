<html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"> <style>
	.KEYW {color: #933;}
	.COMM {color: #bbb; font-style: italic;}
	.NUMB {color: #393;}
	.STRN {color: #393;}
	.REGX {color: #339;}
	.line {border-right: 1px dotted #666; color: #666; font-style: normal;}
	</style></head><body><pre><span class='line'>  1</span> <span class="COMM">/**
<span class='line'>  2</span>  * @fileoverview JSM file-management library.
<span class='line'>  3</span>  */</span><span class="WHIT">
<span class='line'>  4</span> </span><span class="COMM">// JSM exported symbols</span><span class="WHIT">
<span class='line'>  5</span> </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">EXPORTED_SYMBOLS</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">[</span><span class="STRN">"File"</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>  6</span> 
<span class='line'>  7</span> 
<span class='line'>  8</span> </span><span class="COMM">// Shortcuts</span><span class="WHIT">
<span class='line'>  9</span> </span><span class="KEYW">const</span><span class="WHIT"> </span><span class="NAME">Cc</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">Components.classes</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'> 10</span> </span><span class="KEYW">const</span><span class="WHIT"> </span><span class="NAME">Ci</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">Components.interfaces</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'> 11</span> </span><span class="KEYW">const</span><span class="WHIT"> </span><span class="NAME">IO</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">Cc</span><span class="PUNC">[</span><span class="STRN">"@mozilla.org/network/io-service;1"</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">getService</span><span class="PUNC">(</span><span class="NAME">Ci.nsIIOService</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'> 12</span> 
<span class='line'> 13</span> 
<span class='line'> 14</span> </span><span class="COMM">/**
<span class='line'> 15</span>  * Create a new &lt;code>File&lt;/code> instance.
<span class='line'> 16</span>  * &lt;code>aFile&lt;/code> is used to initialize the created object.
<span class='line'> 17</span>  * @param aOrigin   Origin location.
<span class='line'> 18</span>  * @constructor
<span class='line'> 19</span>  *
<span class='line'> 20</span>  * @class The &lt;code>File&lt;/code> class allows to manage files easily.
<span class='line'> 21</span>  *        It is centered around simple actions, in particular full-content
<span class='line'> 22</span>  *        reading and writing.&lt;br>
<span class='line'> 23</span>  *        Technically, &lt;code>File&lt;/code> inherits from
<span class='line'> 24</span>  *        &lt;a href="https://developer.mozilla.org/En/NsIFile" class="symbol">nsIFile&lt;/a>.
<span class='line'> 25</span>  * @extends nsIFile
<span class='line'> 26</span>  */</span><span class="WHIT">
<span class='line'> 27</span> </span><span class="KEYW">function</span><span class="WHIT"> </span><span class="NAME">File</span><span class="PUNC">(</span><span class="COMM">/**File|nsIFile*/</span><span class="WHIT"> </span><span class="NAME">aOrigin</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'> 28</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='line'> 29</span>    * The underlying &lt;code>nsIFile&lt;/code> object.&lt;br>
<span class='line'> 30</span>    * Users should only use the embedded proxy methods, unless impossible.
<span class='line'> 31</span>    * @constant
<span class='line'> 32</span>    * @type nsIFile
<span class='line'> 33</span>    */</span><span class="WHIT">
<span class='line'> 34</span> </span><span class="WHIT">  </span><span class="NAME">this._nsIFile</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">aOrigin</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'> 35</span> </span><span class="WHIT">  </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">aOrigin</span><span class="WHIT"> </span><span class="KEYW">instanceof</span><span class="WHIT"> </span><span class="NAME">File</span><span class="PUNC">)</span><span class="WHIT">
<span class='line'> 36</span> </span><span class="WHIT">    </span><span class="NAME">this._nsIFile</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">aOrigin._nsIFile.clone</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'> 37</span> </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'> 38</span> 
<span class='line'> 39</span> 
<span class='line'> 40</span> </span><span class="COMM">/*
<span class='line'> 41</span>  * File prototype
<span class='line'> 42</span>  */</span><span class="WHIT">
<span class='line'> 43</span> </span><span class="NAME">File.prototype</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'> 44</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='line'> 45</span>    * File name on the local file-system.
<span class='line'> 46</span>    * Can be set to navigate to a descendent of the current file.
<span class='line'> 47</span>    * @type string
<span class='line'> 48</span>    * @see &lt;a href="https://developer.mozilla.org/en/nsIFile/append" class="symbol">nsIFile.append&lt;/a>
<span class='line'> 49</span>    */</span><span class="WHIT">
<span class='line'> 50</span> </span><span class="WHIT">  </span><span class="NAME">get</span><span class="WHIT"> </span><span class="NAME">name</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'> 51</span> </span><span class="WHIT">    </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this._nsIFile.leafName</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'> 52</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'> 53</span> </span><span class="WHIT">  </span><span class="NAME">set</span><span class="WHIT"> </span><span class="NAME">name</span><span class="PUNC">(</span><span class="NAME">aName</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'> 54</span> </span><span class="WHIT">    </span><span class="NAME">this._nsIFile.append</span><span class="PUNC">(</span><span class="NAME">aName</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'> 55</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'> 56</span> 
<span class='line'> 57</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='line'> 58</span>    * File URI.
<span class='line'> 59</span>    * @type nsIURI
<span class='line'> 60</span>    */</span><span class="WHIT">
<span class='line'> 61</span> </span><span class="WHIT">  </span><span class="NAME">get</span><span class="WHIT"> </span><span class="NAME">uri</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'> 62</span> </span><span class="WHIT">    </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">IO.newFileURI</span><span class="PUNC">(</span><span class="NAME">this._nsIFile</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'> 63</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'> 64</span> 
<span class='line'> 65</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='line'> 66</span>    * Get a unique input channel to this file.&lt;br>
<span class='line'> 67</span>    * Used internally to read file content.
<span class='line'> 68</span>    * Users should only use the &lt;code>read*()&lt;/code> methods, unless impossible.
<span class='line'> 69</span>    * @returns {nsIChannel}
<span class='line'> 70</span>    */</span><span class="WHIT">
<span class='line'> 71</span> </span><span class="WHIT">  </span><span class="NAME">_input</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'> 72</span> </span><span class="WHIT">    </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">IO.newChannelFromURI</span><span class="PUNC">(</span><span class="NAME">this.uri</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">open</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'> 73</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'> 74</span> 
<span class='line'> 75</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='line'> 76</span>    * Get a unique output stream to this file.&lt;br>
<span class='line'> 77</span>    * Used internally to write file content.
<span class='line'> 78</span>    * Users should only use the &lt;code>write()&lt;/code> method, unless impossible.
<span class='line'> 79</span>    * @see   &lt;a href="https://developer.mozilla.org/En/NsIFileOutputStream#init()">NsIFileOutputStream.init&lt;/a>
<span class='line'> 80</span>    * @param [ioFlags=File.IO.WRONLY | File.IO.CREATE | File.IO.TRUNCATE]
<span class='line'> 81</span>    *                    Input/output flags (see {@link File.IO}).
<span class='line'> 82</span>    * @param [perm=0644] Unix file permissions.
<span class='line'> 83</span>    * @returns {nsIFileOutputStream}
<span class='line'> 84</span>    */</span><span class="WHIT">
<span class='line'> 85</span> </span><span class="WHIT">  </span><span class="NAME">_output</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="COMM">/**int*/</span><span class="WHIT"> </span><span class="NAME">ioFlags</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="COMM">/**int*/</span><span class="WHIT"> </span><span class="NAME">perm</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'> 86</span> </span><span class="WHIT">    </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">ioFlags</span><span class="PUNC">)</span><span class="WHIT">
<span class='line'> 87</span> </span><span class="WHIT">      </span><span class="NAME">ioFlags</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">File.IO.WRONLY</span><span class="WHIT"> </span><span class="PUNC">|</span><span class="WHIT"> </span><span class="NAME">File.IO.CREATE</span><span class="WHIT"> </span><span class="PUNC">|</span><span class="WHIT"> </span><span class="NAME">File.IO.TRUNCATE</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'> 88</span> </span><span class="WHIT">    </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">perm</span><span class="PUNC">)</span><span class="WHIT">
<span class='line'> 89</span> </span><span class="WHIT">      </span><span class="NAME">perm</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NUMB">0644</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'> 90</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">out</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">Cc</span><span class="PUNC">[</span><span class="STRN">"@mozilla.org/network/file-output-stream;1"</span><span class="PUNC">]</span><span class="WHIT">
<span class='line'> 91</span> </span><span class="WHIT">              </span><span class="PUNC">.</span><span class="NAME">createInstance</span><span class="PUNC">(</span><span class="NAME">Ci.nsIFileOutputStream</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'> 92</span> </span><span class="WHIT">    </span><span class="NAME">out.init</span><span class="PUNC">(</span><span class="NAME">this._nsIFile</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">ioFlags</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">perm</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="PUNC">-</span><span class="NUMB">1</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'> 93</span> </span><span class="WHIT">    </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">out</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'> 94</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'> 95</span> 
<span class='line'> 96</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='line'> 97</span>    * Read raw content.
<span class='line'> 98</span>    * @returns {string}   The raw content.
<span class='line'> 99</span>    */</span><span class="WHIT">
<span class='line'>100</span> </span><span class="WHIT">  </span><span class="NAME">read</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>101</span> </span><span class="WHIT">    </span><span class="COMM">// read content from file</span><span class="WHIT">
<span class='line'>102</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">stream</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">Cc</span><span class="PUNC">[</span><span class="STRN">"@mozilla.org/scriptableinputstream;1"</span><span class="PUNC">]</span><span class="WHIT">
<span class='line'>103</span> </span><span class="WHIT">                 </span><span class="PUNC">.</span><span class="NAME">getService</span><span class="PUNC">(</span><span class="NAME">Ci.nsIScriptableInputStream</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>104</span> </span><span class="WHIT">    </span><span class="NAME">stream.init</span><span class="PUNC">(</span><span class="NAME">this._input</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>105</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">content</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">stream.read</span><span class="PUNC">(</span><span class="NAME">stream.available</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>106</span> </span><span class="WHIT">    </span><span class="NAME">stream.close</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>107</span> </span><span class="WHIT">    </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">content</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>108</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>109</span> 
<span class='line'>110</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='line'>111</span>    * Read text content.
<span class='line'>112</span>    * @param [aCharset="UTF-8"]  The charset to use.
<span class='line'>113</span>    * @returns {string}   The text content.
<span class='line'>114</span>    */</span><span class="WHIT">
<span class='line'>115</span> </span><span class="WHIT">  </span><span class="NAME">readText</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="COMM">/**string*/</span><span class="WHIT"> </span><span class="NAME">aCharset</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>116</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">text</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.read</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>117</span> </span><span class="WHIT">    </span><span class="COMM">// convert to target charset</span><span class="WHIT">
<span class='line'>118</span> </span><span class="WHIT">    </span><span class="KEYW">if</span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">aCharset</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="NAME">aCharset</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">"UTF-8"</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>119</span> </span><span class="WHIT">    </span><span class="COMM">// http://lxr.mozilla.org/mozilla/source/intl/uconv/idl/nsIScriptableUConv.idl</span><span class="WHIT">
<span class='line'>120</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">converter</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">Cc</span><span class="PUNC">[</span><span class="STRN">"@mozilla.org/intl/scriptableunicodeconverter"</span><span class="PUNC">]</span><span class="WHIT">
<span class='line'>121</span> </span><span class="WHIT">                    </span><span class="PUNC">.</span><span class="NAME">createInstance</span><span class="PUNC">(</span><span class="NAME">Ci.nsIScriptableUnicodeConverter</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>122</span> </span><span class="WHIT">    </span><span class="NAME">converter.charset</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">aCharset</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>123</span> </span><span class="WHIT">    </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">converter.ConvertToUnicode</span><span class="PUNC">(</span><span class="NAME">text</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>124</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>125</span> 
<span class='line'>126</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='line'>127</span>    * Read XML content.
<span class='line'>128</span>    * @param [aCharset="UTF-8"]  The charset to convert content to.
<span class='line'>129</span>    * @returns {nsIDOMDocument}  The XML content.
<span class='line'>130</span>    */</span><span class="WHIT">
<span class='line'>131</span> </span><span class="WHIT">  </span><span class="NAME">readXML</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="COMM">/**string*/</span><span class="WHIT"> </span><span class="NAME">aCharset</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>132</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">parser</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">Cc</span><span class="PUNC">[</span><span class="STRN">"@mozilla.org/xmlextras/domparser;1"</span><span class="PUNC">]</span><span class="WHIT">
<span class='line'>133</span> </span><span class="WHIT">                 </span><span class="PUNC">.</span><span class="NAME">createInstance</span><span class="PUNC">(</span><span class="NAME">Ci.nsIDOMParser</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>134</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">text</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this.readText</span><span class="PUNC">(</span><span class="NAME">aCharset</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>135</span> </span><span class="WHIT">    </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">parser.parseFromString</span><span class="PUNC">(</span><span class="NAME">text</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="STRN">"text/xml"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>136</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>137</span> 
<span class='line'>138</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='line'>139</span>    * Read binary content.
<span class='line'>140</span>    * @returns {string}   The binary content.
<span class='line'>141</span>    */</span><span class="WHIT">
<span class='line'>142</span> </span><span class="WHIT">  </span><span class="NAME">readBytes</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>143</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">stream</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">Cc</span><span class="PUNC">[</span><span class="STRN">"@mozilla.org/binaryinputstream;1"</span><span class="PUNC">]</span><span class="WHIT">
<span class='line'>144</span> </span><span class="WHIT">                 </span><span class="PUNC">.</span><span class="NAME">createInstance</span><span class="PUNC">(</span><span class="NAME">Ci.nsIBinaryInputStream</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>145</span> </span><span class="WHIT">    </span><span class="NAME">stream.setInputStream</span><span class="PUNC">(</span><span class="NAME">this._input</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>146</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">bytes</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">stream.readBytes</span><span class="PUNC">(</span><span class="NAME">stream.available</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>147</span> </span><span class="WHIT">    </span><span class="NAME">stream.close</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>148</span> </span><span class="WHIT">    </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">bytes</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>149</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>150</span> 
<span class='line'>151</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='line'>152</span>    * Write raw content.
<span class='line'>153</span>    * @param aData       The raw content to write.
<span class='line'>154</span>    * @param [perm=0644] Unix file permissions.
<span class='line'>155</span>    */</span><span class="WHIT">
<span class='line'>156</span> </span><span class="WHIT">  </span><span class="NAME">write</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="COMM">/**string*/</span><span class="WHIT"> </span><span class="NAME">aData</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="COMM">/**int*/</span><span class="WHIT"> </span><span class="NAME">perm</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>157</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">out</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this._output</span><span class="PUNC">(</span><span class="KEYW">null</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">perm</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>158</span> </span><span class="WHIT">    </span><span class="NAME">out.write</span><span class="PUNC">(</span><span class="NAME">aData</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">aData.length</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>159</span> </span><span class="WHIT">    </span><span class="NAME">out.close</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>160</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>161</span> 
<span class='line'>162</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='line'>163</span>    * Write XML content.
<span class='line'>164</span>    * @param aXMLData    The XML content to write.
<span class='line'>165</span>    * @param [aCharset]  The charset to use.
<span class='line'>166</span>    * @param [perm=0644] Unix file permissions.
<span class='line'>167</span>    */</span><span class="WHIT">
<span class='line'>168</span> </span><span class="WHIT">  </span><span class="NAME">writeXML</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="COMM">/**nsIDOMNode*/</span><span class="WHIT"> </span><span class="NAME">aXMLData</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="COMM">/**string*/</span><span class="WHIT"> </span><span class="NAME">aCharset</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>169</span> </span><span class="WHIT">                     </span><span class="COMM">/**int*/</span><span class="WHIT"> </span><span class="NAME">perm</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>170</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">out</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this._output</span><span class="PUNC">(</span><span class="KEYW">null</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">perm</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>171</span> </span><span class="WHIT">    </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="PUNC">!</span><span class="NAME">aCharset</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="NAME">aCharset</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="STRN">"UTF-8"</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>172</span> </span><span class="WHIT">    </span><span class="NAME">Cc</span><span class="PUNC">[</span><span class="STRN">"@mozilla.org/xmlextras/xmlserializer;1"</span><span class="PUNC">]</span><span class="WHIT">
<span class='line'>173</span> </span><span class="WHIT">       </span><span class="PUNC">.</span><span class="NAME">createInstance</span><span class="PUNC">(</span><span class="NAME">Ci.nsIDOMSerializer</span><span class="PUNC">)</span><span class="WHIT">
<span class='line'>174</span> </span><span class="WHIT">       </span><span class="PUNC">.</span><span class="NAME">serializeToStream</span><span class="PUNC">(</span><span class="NAME">aXMLData</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">out</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">aCharset</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>175</span> </span><span class="WHIT">    </span><span class="NAME">out.close</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>176</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>177</span> 
<span class='line'>178</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='line'>179</span>    * Asynchronously load a target URI in this file.&lt;br>&lt;br>
<span class='line'>180</span>    * If present, &lt;code>onComplete&lt;/code> is called on completion, with three
<span class='line'>181</span>    * parameters:
<span class='line'>182</span>    * &lt;ul>
<span class='line'>183</span>    * &lt;li>&lt;code class="light">nsIChannel&lt;/code> :
<span class='line'>184</span>    *    The channel used to load the target URI. If the HTTP protocol is used,
<span class='line'>185</span>    *    this is a &lt;code class="light">nsIHttpChannel&lt;/code>.&lt;/li>
<span class='line'>186</span>    * &lt;li>&lt;code class="light">int&lt;/code> :
<span class='line'>187</span>    *    The request status code (0 on success). In case of error, this is a HTTP
<span class='line'>188</span>    *    error code if HTTP was used.&lt;/li>
<span class='line'>189</span>    * &lt;li>&lt;code class="light">string&lt;/code> :
<span class='line'>190</span>    *    The message associated with this status/error code.&lt;/li>
<span class='line'>191</span>    * &lt;/ul>
<span class='line'>192</span>    * This method bypasses the files cache and replaces existing files.
<span class='line'>193</span>    * It uses a &lt;a href="https://developer.mozilla.org/en/nsIWebBrowserPersist" class="symbol">nsIWebBrowserPersist&lt;/a>
<span class='line'>194</span>    * to perform its task.
<span class='line'>195</span>    * @param aURI            The target URI to load.
<span class='line'>196</span>    * @param [onComplete]    The function to call on completion.
<span class='line'>197</span>    */</span><span class="WHIT">
<span class='line'>198</span> </span><span class="WHIT">  </span><span class="NAME">load</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="COMM">/**nsIURI|String*/</span><span class="WHIT"> </span><span class="NAME">aUri</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="COMM">/**Function*/</span><span class="WHIT"> </span><span class="NAME">onComplete</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>199</span> </span><span class="WHIT">    </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="KEYW">typeof</span><span class="WHIT"> </span><span class="NAME">aUri</span><span class="WHIT"> </span><span class="PUNC">==</span><span class="WHIT"> </span><span class="STRN">"string"</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="NAME">aUri</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">File.getUri</span><span class="PUNC">(</span><span class="NAME">aUri</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>200</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">channel</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">IO.newChannelFromURI</span><span class="PUNC">(</span><span class="NAME">aUri</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>201</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">file</span><span class="WHIT">    </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this._nsIFile</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>202</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">persist</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">Cc</span><span class="PUNC">[</span><span class="STRN">"@mozilla.org/embedding/browser/nsWebBrowserPersist;1"</span><span class="PUNC">]</span><span class="WHIT">
<span class='line'>203</span> </span><span class="WHIT">                  </span><span class="PUNC">.</span><span class="NAME">createInstance</span><span class="PUNC">(</span><span class="NAME">Ci.nsIWebBrowserPersist</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>204</span> </span><span class="WHIT">    </span><span class="NAME">persist.persistFlags</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">persist.PERSIST_FLAGS_BYPASS_CACHE</span><span class="WHIT"> </span><span class="PUNC">|</span><span class="WHIT">
<span class='line'>205</span> </span><span class="WHIT">                           </span><span class="NAME">persist.PERSIST_FLAGS_REPLACE_EXISTING_FILES</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>206</span> </span><span class="WHIT">    </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">onComplete</span><span class="PUNC">)</span><span class="WHIT">
<span class='line'>207</span> </span><span class="WHIT">      </span><span class="NAME">persist.progressListener</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>208</span> </span><span class="WHIT">        </span><span class="NAME">onStateChange</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">aWebProgress</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">aRequest</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">aStateFlags</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">aStatus</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>209</span> </span><span class="WHIT">          </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">persist.currentState</span><span class="WHIT"> </span><span class="PUNC">!=</span><span class="WHIT"> </span><span class="NAME">persist.PERSIST_STATE_FINISHED</span><span class="PUNC">)</span><span class="WHIT">
<span class='line'>210</span> </span><span class="WHIT">            </span><span class="KEYW">return</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>211</span> </span><span class="WHIT">          </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">aUri.scheme</span><span class="PUNC">!=</span><span class="STRN">"http"</span><span class="WHIT"> </span><span class="PUNC">&&</span><span class="WHIT"> </span><span class="NAME">aUri.scheme</span><span class="PUNC">!=</span><span class="STRN">"https"</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>212</span> </span><span class="WHIT">            </span><span class="NAME">onComplete</span><span class="PUNC">(</span><span class="NAME">channel</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">aStatus</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">aStatus</span><span class="PUNC">==</span><span class="NUMB">0</span><span class="WHIT"> </span><span class="PUNC">?</span><span class="WHIT"> </span><span class="STRN">"OK"</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="STRN">"Unknown error"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>213</span> </span><span class="WHIT">            </span><span class="KEYW">return</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>214</span> </span><span class="WHIT">          </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>215</span> </span><span class="WHIT">          </span><span class="NAME">channel</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">channel.QueryInterface</span><span class="PUNC">(</span><span class="NAME">Ci.nsIHttpChannel</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>216</span> </span><span class="WHIT">          </span><span class="NAME">onComplete</span><span class="PUNC">(</span><span class="NAME">channel</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>217</span> </span><span class="WHIT">                     </span><span class="NAME">channel.requestSucceeded</span><span class="WHIT"> </span><span class="PUNC">?</span><span class="WHIT"> </span><span class="NUMB">0</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NAME">channel.responseStatus</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>218</span> </span><span class="WHIT">                     </span><span class="NAME">channel.responseStatusText</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>219</span> </span><span class="WHIT">        </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>220</span> </span><span class="WHIT">        </span><span class="NAME">onProgressChange</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">onLocationChange</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>221</span> </span><span class="WHIT">        </span><span class="NAME">onStatusChange</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">onSecurityChange</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>222</span> </span><span class="WHIT">      </span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>223</span> </span><span class="WHIT">    </span><span class="NAME">persist.saveChannel</span><span class="PUNC">(</span><span class="NAME">channel</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">file</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>224</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>225</span> 
<span class='line'>226</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='line'>227</span>    * Execute this file.
<span class='line'>228</span>    * @param [aArguments]        The arguments to execute this file with.
<span class='line'>229</span>    * @param [aBlocking=false]   Whether to block until the process terminates.
<span class='line'>230</span>    * @returns {nsIProcess}      The corresponding process.
<span class='line'>231</span>    * @see &lt;a href="https://developer.mozilla.org/en/NsIProcess" class="symbol">nsIProcess&lt;/a>
<span class='line'>232</span>    */</span><span class="WHIT">
<span class='line'>233</span> </span><span class="WHIT">  </span><span class="NAME">exec</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="COMM">/**string[]*/</span><span class="WHIT"> </span><span class="NAME">aArguments</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="COMM">/**boolean*/</span><span class="WHIT"> </span><span class="NAME">aBlocking</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>234</span> </span><span class="WHIT">    </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">aArguments</span><span class="WHIT"> </span><span class="PUNC">==</span><span class="WHIT"> </span><span class="NAME">undefined</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="NAME">aArguments</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">[</span><span class="PUNC">]</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>235</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">app</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">this._nsIFile</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>236</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">xulRuntime</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">Cc</span><span class="PUNC">[</span><span class="STRN">"@mozilla.org/xre/app-info;1"</span><span class="PUNC">]</span><span class="WHIT">
<span class='line'>237</span> </span><span class="WHIT">                     </span><span class="PUNC">.</span><span class="NAME">getService</span><span class="PUNC">(</span><span class="NAME">Ci.nsIXULRuntime</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>238</span> </span><span class="WHIT">    </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">xulRuntime.OS</span><span class="WHIT"> </span><span class="PUNC">==</span><span class="WHIT"> </span><span class="STRN">"Darwin"</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>239</span> </span><span class="WHIT">      </span><span class="COMM">// on Mac, wrap with a call to "open".</span><span class="WHIT">
<span class='line'>240</span> </span><span class="WHIT">      </span><span class="NAME">aArguments</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">[</span><span class="STRN">"-a"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">app.path</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">concat</span><span class="PUNC">(</span><span class="NAME">aArguments</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>241</span> </span><span class="WHIT">      </span><span class="NAME">app</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">File.path</span><span class="PUNC">(</span><span class="STRN">"/usr/bin/open"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="PUNC">)</span><span class="PUNC">.</span><span class="NAME">_nsIFile</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>242</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>243</span> </span><span class="WHIT">    </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">process</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">Cc</span><span class="PUNC">[</span><span class="STRN">"@mozilla.org/process/util;1"</span><span class="PUNC">]</span><span class="WHIT">
<span class='line'>244</span> </span><span class="WHIT">                  </span><span class="PUNC">.</span><span class="NAME">createInstance</span><span class="PUNC">(</span><span class="NAME">Ci.nsIProcess</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>245</span> </span><span class="WHIT">    </span><span class="NAME">process.init</span><span class="PUNC">(</span><span class="NAME">app</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>246</span> </span><span class="WHIT">    </span><span class="NAME">process.run</span><span class="PUNC">(</span><span class="NAME">aBlocking</span><span class="WHIT"> </span><span class="PUNC">?</span><span class="WHIT"> </span><span class="KEYW">true</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">aArguments</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">aArguments.length</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>247</span> </span><span class="WHIT">    </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">process</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>248</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>249</span> 
<span class='line'>250</span> </span><span class="WHIT">  </span><span class="COMM">/*
<span class='line'>251</span>    * ============================ nsIFile interface ============================
<span class='line'>252</span>    *
<span class='line'>253</span>    * These are shortcut methods to their nsIFile counterparts, with some added
<span class='line'>254</span>    * sensible default values.
<span class='line'>255</span>    */</span><span class="WHIT">
<span class='line'>256</span> 
<span class='line'>257</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='line'>258</span>    * This file's path.
<span class='line'>259</span>    * @type string
<span class='line'>260</span>    * @see &lt;a href="https://developer.mozilla.org/en/nsIFile/path" class="symbol">nsIFile.path&lt;/a>
<span class='line'>261</span>    */</span><span class="WHIT">
<span class='line'>262</span> </span><span class="WHIT">  </span><span class="NAME">get</span><span class="WHIT"> </span><span class="NAME">path</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>263</span> </span><span class="WHIT">     </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this._nsIFile.path</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>264</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>265</span> 
<span class='line'>266</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='line'>267</span>    * Create a new file/directory.
<span class='line'>268</span>    * @param [aType=File.FILE]
<span class='line'>269</span>    *        File type: {@link File.FILE} or {@link File.DIR}.
<span class='line'>270</span>    * @param [aPermissions=0644|0755]
<span class='line'>271</span>    *        Unix permissions (default is 0644 for a file, 0755 for a directory).
<span class='line'>272</span>    * @see &lt;a href="https://developer.mozilla.org/en/nsIFile/create" class="symbol">nsIFile.create&lt;/a>
<span class='line'>273</span>    */</span><span class="WHIT">
<span class='line'>274</span> </span><span class="WHIT">  </span><span class="NAME">create</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="COMM">/**int*/</span><span class="WHIT"> </span><span class="NAME">aType</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="COMM">/**int*/</span><span class="WHIT"> </span><span class="NAME">aPermissions</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>275</span> </span><span class="WHIT">    </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="KEYW">typeof</span><span class="WHIT"> </span><span class="NAME">aType</span><span class="WHIT"> </span><span class="PUNC">!=</span><span class="WHIT"> </span><span class="STRN">"number"</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="NAME">aType</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">File.FILE</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>276</span> </span><span class="WHIT">    </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="KEYW">typeof</span><span class="WHIT"> </span><span class="NAME">aPermissions</span><span class="WHIT"> </span><span class="PUNC">!=</span><span class="WHIT"> </span><span class="STRN">"number"</span><span class="PUNC">)</span><span class="WHIT">
<span class='line'>277</span> </span><span class="WHIT">      </span><span class="NAME">aPermissions</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">aType</span><span class="PUNC">==</span><span class="NAME">File.DIR</span><span class="WHIT"> </span><span class="PUNC">?</span><span class="WHIT"> </span><span class="NUMB">0755</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NUMB">0644</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>278</span> </span><span class="WHIT">    </span><span class="NAME">this._nsIFile.create</span><span class="PUNC">(</span><span class="NAME">aType</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">aPermissions</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>279</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>280</span> 
<span class='line'>281</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='line'>282</span>    * Create a new &lt;i>unique&lt;/i> file/directory. If the chosen name already
<span class='line'>283</span>    * exists, variations will be tried until one proves unique.
<span class='line'>284</span>    * @param [aType=File.FILE]
<span class='line'>285</span>    *        File type: {@link File.FILE} or {@link File.DIR}.
<span class='line'>286</span>    * @param [aPermissions=0644|0755]
<span class='line'>287</span>    *        Unix permissions (default is 0644 for a file, 0755 for a directory).
<span class='line'>288</span>    * @returns {string}  The name of the created file.
<span class='line'>289</span>    * @see &lt;a href="https://developer.mozilla.org/en/nsIFile/createUnique" class="symbol">nsIFile.createUnique&lt;/a>
<span class='line'>290</span>    */</span><span class="WHIT">
<span class='line'>291</span> </span><span class="WHIT">  </span><span class="NAME">createUnique</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="COMM">/**int*/</span><span class="WHIT"> </span><span class="NAME">aType</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="COMM">/**int*/</span><span class="WHIT"> </span><span class="NAME">aPermissions</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>292</span> </span><span class="WHIT">    </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="KEYW">typeof</span><span class="WHIT"> </span><span class="NAME">aType</span><span class="WHIT"> </span><span class="PUNC">!=</span><span class="WHIT"> </span><span class="STRN">"number"</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="NAME">aType</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">File.FILE</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>293</span> </span><span class="WHIT">    </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="KEYW">typeof</span><span class="WHIT"> </span><span class="NAME">aPermissions</span><span class="WHIT"> </span><span class="PUNC">!=</span><span class="WHIT"> </span><span class="STRN">"number"</span><span class="PUNC">)</span><span class="WHIT">
<span class='line'>294</span> </span><span class="WHIT">      </span><span class="NAME">aPermissions</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">aType</span><span class="PUNC">==</span><span class="NAME">File.DIR</span><span class="WHIT"> </span><span class="PUNC">?</span><span class="WHIT"> </span><span class="NUMB">0755</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="NUMB">0644</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>295</span> </span><span class="WHIT">    </span><span class="NAME">this._nsIFile.createUnique</span><span class="PUNC">(</span><span class="NAME">aType</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">aPermissions</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>296</span> </span><span class="WHIT">    </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this.name</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>297</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>298</span> 
<span class='line'>299</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='line'>300</span>    * Remove this file/directory.
<span class='line'>301</span>    * @param [aRecursive=false]
<span class='line'>302</span>    *        If set to &lt;code>true&lt;/code>, recursively remove descendents.
<span class='line'>303</span>    * @see &lt;a href="https://developer.mozilla.org/en/nsIFile/remove" class="symbol">nsIFile.remove&lt;/a>
<span class='line'>304</span>    */</span><span class="WHIT">
<span class='line'>305</span> </span><span class="WHIT">  </span><span class="NAME">remove</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="COMM">/**boolean*/</span><span class="WHIT"> </span><span class="NAME">aRecursive</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>306</span> </span><span class="WHIT">    </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="KEYW">typeof</span><span class="WHIT"> </span><span class="NAME">aRecursive</span><span class="WHIT"> </span><span class="PUNC">!=</span><span class="WHIT"> </span><span class="STRN">"boolean"</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="NAME">aRecursive</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>307</span> </span><span class="WHIT">    </span><span class="NAME">this._nsIFile.remove</span><span class="PUNC">(</span><span class="NAME">aRecursive</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>308</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="PUNC">,</span><span class="WHIT">
<span class='line'>309</span> 
<span class='line'>310</span> </span><span class="WHIT">  </span><span class="COMM">/**
<span class='line'>311</span>    * Catch-all method masquerading &lt;code>nsIFile&lt;/code> inheritance.
<span class='line'>312</span>    * In case of error, file name and line number will show in the command line.
<span class='line'>313</span>    */</span><span class="WHIT">
<span class='line'>314</span> </span><span class="WHIT">  </span><span class="NAME">__noSuchMethod__</span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="NAME">id</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">args</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>315</span> </span><span class="WHIT">    </span><span class="KEYW">try</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>316</span> </span><span class="WHIT">      </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">this._nsIFile</span><span class="PUNC">[</span><span class="NAME">id</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">apply</span><span class="PUNC">(</span><span class="NAME">this._nsIFile</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">args</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>317</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT"> </span><span class="KEYW">catch</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="NAME">e</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>318</span> </span><span class="WHIT">      </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">caller</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">Components.stack.caller</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>319</span> </span><span class="WHIT">      </span><span class="NAME">dump</span><span class="PUNC">(</span><span class="NAME">e.message</span><span class="PUNC">+</span><span class="STRN">" ("</span><span class="PUNC">+</span><span class="NAME">caller.filename</span><span class="PUNC">+</span><span class="STRN">":"</span><span class="PUNC">+</span><span class="NAME">caller.lineNumber</span><span class="PUNC">+</span><span class="STRN">")\n"</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>320</span> </span><span class="WHIT">      </span><span class="KEYW">throw</span><span class="WHIT"> </span><span class="NAME">e</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>321</span> </span><span class="WHIT">    </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>322</span> </span><span class="WHIT">  </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>323</span> 
<span class='line'>324</span> </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>325</span> 
<span class='line'>326</span> 
<span class='line'>327</span> </span><span class="COMM">/*
<span class='line'>328</span>  * ============================== static properties ============================
<span class='line'>329</span>  */</span><span class="WHIT">
<span class='line'>330</span> 
<span class='line'>331</span> 
<span class='line'>332</span> </span><span class="COMM">/**
<span class='line'>333</span>  * Directory type.
<span class='line'>334</span>  * @type int
<span class='line'>335</span>  * @constant
<span class='line'>336</span>  */</span><span class="WHIT">
<span class='line'>337</span> </span><span class="NAME">File.DIR</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">Ci.nsIFile.DIRECTORY_TYPE</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>338</span> </span><span class="COMM">/**
<span class='line'>339</span>  * File type.
<span class='line'>340</span>  * @type int
<span class='line'>341</span>  * @constant
<span class='line'>342</span>  */</span><span class="WHIT">
<span class='line'>343</span> </span><span class="NAME">File.FILE</span><span class="WHIT">      </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">Ci.nsIFile.NORMAL_FILE_TYPE</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>344</span> 
<span class='line'>345</span> 
<span class='line'>346</span> </span><span class="COMM">/*
<span class='line'>347</span>  * ============================== factory methods ==============================
<span class='line'>348</span>  */</span><span class="WHIT">
<span class='line'>349</span> 
<span class='line'>350</span> 
<span class='line'>351</span> </span><span class="COMM">/**
<span class='line'>352</span>  * Get the current profile folder.
<span class='line'>353</span>  * @returns {File}   The current profile folder.
<span class='line'>354</span>  */</span><span class="WHIT">
<span class='line'>355</span> </span><span class="NAME">File.profile</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>356</span> </span><span class="WHIT">  </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">File</span><span class="PUNC">(</span><span class="NAME">Cc</span><span class="PUNC">[</span><span class="STRN">"@mozilla.org/file/directory_service;1"</span><span class="PUNC">]</span><span class="WHIT">
<span class='line'>357</span> </span><span class="WHIT">                  </span><span class="PUNC">.</span><span class="NAME">getService</span><span class="PUNC">(</span><span class="NAME">Ci.nsIProperties</span><span class="PUNC">)</span><span class="WHIT">
<span class='line'>358</span> </span><span class="WHIT">                  </span><span class="PUNC">.</span><span class="NAME">get</span><span class="PUNC">(</span><span class="STRN">"ProfD"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">Ci.nsILocalFile</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>359</span> </span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>360</span> 
<span class='line'>361</span> </span><span class="COMM">/**
<span class='line'>362</span>  * Get the temporary files folder.
<span class='line'>363</span>  * @returns {File}   Temporary folder.
<span class='line'>364</span>  */</span><span class="WHIT">
<span class='line'>365</span> </span><span class="NAME">File.temp</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>366</span> </span><span class="WHIT">  </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">File</span><span class="PUNC">(</span><span class="NAME">Cc</span><span class="PUNC">[</span><span class="STRN">"@mozilla.org/file/directory_service;1"</span><span class="PUNC">]</span><span class="WHIT">
<span class='line'>367</span> </span><span class="WHIT">                  </span><span class="PUNC">.</span><span class="NAME">getService</span><span class="PUNC">(</span><span class="NAME">Ci.nsIProperties</span><span class="PUNC">)</span><span class="WHIT">
<span class='line'>368</span> </span><span class="WHIT">                  </span><span class="PUNC">.</span><span class="NAME">get</span><span class="PUNC">(</span><span class="STRN">"TmpD"</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">Ci.nsILocalFile</span><span class="PUNC">)</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>369</span> </span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>370</span> 
<span class='line'>371</span> </span><span class="COMM">/**
<span class='line'>372</span>  * Get a file from an arbitrary path.
<span class='line'>373</span>  * @param aPath                 The target path on the local file system.  
<span class='line'>374</span>  * @param [aFollowLinks=false]  Whether links should be followed.
<span class='line'>375</span>  * @returns {File}   The corresponding file.
<span class='line'>376</span>  */</span><span class="WHIT">
<span class='line'>377</span> </span><span class="NAME">File.path</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="COMM">/**string*/</span><span class="WHIT"> </span><span class="NAME">aPath</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="COMM">/**boolean*/</span><span class="WHIT"> </span><span class="NAME">aFollowLinks</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>378</span> </span><span class="WHIT">  </span><span class="KEYW">var</span><span class="WHIT"> </span><span class="NAME">file</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">Cc</span><span class="PUNC">[</span><span class="STRN">"@mozilla.org/file/local;1"</span><span class="PUNC">]</span><span class="PUNC">.</span><span class="NAME">createInstance</span><span class="PUNC">(</span><span class="NAME">Ci.nsILocalFile</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>379</span> </span><span class="WHIT">  </span><span class="NAME">file.followLinks</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NAME">aFollowLinks</span><span class="PUNC">!=</span><span class="NAME">undefined</span><span class="WHIT"> </span><span class="PUNC">?</span><span class="WHIT"> </span><span class="NAME">aFollowLinks</span><span class="WHIT"> </span><span class="PUNC">:</span><span class="WHIT"> </span><span class="KEYW">false</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>380</span> </span><span class="WHIT">  </span><span class="NAME">file.initWithPath</span><span class="PUNC">(</span><span class="NAME">aPath</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>381</span> </span><span class="WHIT">  </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="KEYW">new</span><span class="WHIT"> </span><span class="NAME">File</span><span class="PUNC">(</span><span class="NAME">file</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>382</span> </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>383</span> 
<span class='line'>384</span> 
<span class='line'>385</span> </span><span class="COMM">/*
<span class='line'>386</span>  * ============================== static methods ==============================
<span class='line'>387</span>  */</span><span class="WHIT">
<span class='line'>388</span> 
<span class='line'>389</span> 
<span class='line'>390</span> </span><span class="COMM">/**
<span class='line'>391</span>  * Get a file's URI.
<span class='line'>392</span>  * @param aTarget       The target file or path.
<span class='line'>393</span>  * @param [aBase]       The base URI (relative &lt;code>aTarget&lt;/code> path only).  
<span class='line'>394</span>  * @returns {nsIURI}    Its URI object.
<span class='line'>395</span>  */</span><span class="WHIT">
<span class='line'>396</span> </span><span class="NAME">File.getUri</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="KEYW">function</span><span class="PUNC">(</span><span class="COMM">/**nsIFile|string*/</span><span class="WHIT"> </span><span class="NAME">aTarget</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="COMM">/**nsIURI*/</span><span class="WHIT"> </span><span class="NAME">aBase</span><span class="PUNC">)</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="WHIT">
<span class='line'>397</span> </span><span class="WHIT">  </span><span class="KEYW">if</span><span class="WHIT"> </span><span class="PUNC">(</span><span class="KEYW">typeof</span><span class="WHIT"> </span><span class="NAME">aTarget</span><span class="WHIT"> </span><span class="PUNC">==</span><span class="WHIT"> </span><span class="STRN">"string"</span><span class="PUNC">)</span><span class="WHIT">
<span class='line'>398</span> </span><span class="WHIT">    </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">IO.newURI</span><span class="PUNC">(</span><span class="NAME">aTarget</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="KEYW">null</span><span class="PUNC">,</span><span class="WHIT"> </span><span class="NAME">aBase</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>399</span> </span><span class="WHIT">  </span><span class="KEYW">return</span><span class="WHIT"> </span><span class="NAME">IO.newFileURI</span><span class="PUNC">(</span><span class="NAME">aTarget</span><span class="PUNC">)</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>400</span> </span><span class="PUNC">}</span><span class="WHIT">
<span class='line'>401</span> 
<span class='line'>402</span> 
<span class='line'>403</span> </span><span class="COMM">/*
<span class='line'>404</span>  * ================================ File.IO ====================================
<span class='line'>405</span>  */</span><span class="WHIT">
<span class='line'>406</span> 
<span class='line'>407</span> 
<span class='line'>408</span> </span><span class="COMM">/**
<span class='line'>409</span>  * @namespace   File input/output flags.&lt;br>
<span class='line'>410</span>  *              See: &lt;a href="https://developer.mozilla.org/en/PR_Open#Parameters">MDC documentation&lt;/a>.
<span class='line'>411</span>  */</span><span class="WHIT">
<span class='line'>412</span> </span><span class="NAME">File.IO</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="PUNC">{</span><span class="PUNC">}</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>413</span> </span><span class="COMM">/**
<span class='line'>414</span>  * Open for reading only.
<span class='line'>415</span>  * @type int
<span class='line'>416</span>  * @constant
<span class='line'>417</span>  */</span><span class="WHIT">
<span class='line'>418</span> </span><span class="NAME">File.IO.RDONLY</span><span class="WHIT">      </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NUMB">0x01</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>419</span> </span><span class="COMM">/**
<span class='line'>420</span>  * Open for writing only.
<span class='line'>421</span>  * @type int
<span class='line'>422</span>  * @constant
<span class='line'>423</span>  */</span><span class="WHIT">
<span class='line'>424</span> </span><span class="NAME">File.IO.WRONLY</span><span class="WHIT">      </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NUMB">0x02</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>425</span> </span><span class="COMM">/**
<span class='line'>426</span>  * Open for reading and writing.
<span class='line'>427</span>  * @type int
<span class='line'>428</span>  * @constant
<span class='line'>429</span>  */</span><span class="WHIT">
<span class='line'>430</span> </span><span class="NAME">File.IO.RDWR</span><span class="WHIT">        </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NUMB">0x04</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>431</span> </span><span class="COMM">/**
<span class='line'>432</span>  * Create file if needed.
<span class='line'>433</span>  * @type int
<span class='line'>434</span>  * @constant
<span class='line'>435</span>  */</span><span class="WHIT">
<span class='line'>436</span> </span><span class="NAME">File.IO.CREATE</span><span class="WHIT"> </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NUMB">0x08</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>437</span> </span><span class="COMM">/**
<span class='line'>438</span>  * Append to end of file.
<span class='line'>439</span>  * @type int
<span class='line'>440</span>  * @constant
<span class='line'>441</span>  */</span><span class="WHIT">
<span class='line'>442</span> </span><span class="NAME">File.IO.APPEND</span><span class="WHIT">      </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NUMB">0x10</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>443</span> </span><span class="COMM">/**
<span class='line'>444</span>  * Reset file size to zero.
<span class='line'>445</span>  * @type int
<span class='line'>446</span>  * @constant
<span class='line'>447</span>  */</span><span class="WHIT">
<span class='line'>448</span> </span><span class="NAME">File.IO.TRUNCATE</span><span class="WHIT">    </span><span class="PUNC">=</span><span class="WHIT"> </span><span class="NUMB">0x20</span><span class="PUNC">;</span><span class="WHIT">
<span class='line'>449</span> </span></pre></body></html>